---
cloud_vendor: aws
consul_run_as_server: false
consul_retry_join: provider=aws region=us-east-1 tag_key=consul-servers tag_value=terraform-consul addr_type=private_v4
vault_supervisor_cmd_flags: '-config=/etc/vault.d/vault.hcl'
vault_unseal_pgp_keys:
  - { keybase: jeffreyhogan, email: jeffrey.hogan@wpengine.com }
supervisor_programs:
  - name: 'vault'
    command: /usr/local/bin/vault server {{ vault_supervisor_cmd_flags|default('') }}
    state: present
    user: vault
    configuration: |
     autostart=true
     autorestart=true
     startretries=1
     startsecs=1
     redirect_stderr=true
     stderr_logfile=/var/log/vault.error.log
     stdout_logfile=/var/log/vault.log
     killasgroup=true
     stopasgroup=true
